{{ header }}{{ column_left }} 
<div id="content">
  <div class="page-header">
    <div class="container-fluid">
      <div class="pull-right">
        <button type="submit" form="form-seo_pro" data-toggle="tooltip" title="{{ button_save }}" class="btn btn-primary"><i class="fa fa-save"></i></button>
        <a href="{{ cancel }}" data-toggle="tooltip" title="{{ button_cancel }}" class="btn btn-default"><i class="fa fa-reply"></i></a></div>
      <h1>{{ heading_title }}</h1>
      <ul class="breadcrumb">
        {% for breadcrumb in breadcrumbs %} 
        <li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
        {% endfor %} 
      </ul>
    </div>
  </div>
  <div class="container-fluid">
    {% if success %}
    <div class="alert alert-success alert-dismissible"><i class="fa fa-check-circle"></i> {{ success }}
      <button type="button" class="close" data-dismiss="alert">&times;</button>
    </div>
    {% endif %}
    {% if (error_warning) %} 
    <div class="alert alert-danger"><i class="fa fa-exclamation-circle"></i> {{ error_warning }} 
      <button type="button" class="close" data-dismiss="alert">&times;</button>
    </div>
    {% endif %} 
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title"><i class="fa fa-pencil"></i> {{ text_edit }}</h3>
      </div>
      <div class="panel-body">
        <form action="{{ action }}" method="post" enctype="multipart/form-data" id="form-seo_pro" class="form-horizontal">
          <ul class="nav nav-tabs">
            <li class="active"><a href="#tab-settings" data-toggle="tab">{{ tab_settings }}</a></li>
            <li><a href="#tab-help" data-toggle="tab">{{ tab_help }}</a></li>
          </ul>
          <div class="tab-content">
            <div class="tab-pane active" id="tab-settings">
              <div class="form-group">
                <label class="col-sm-2 control-label">{{ entry_seo_url }}</label>
                <div class="col-sm-10">
                  <label class="radio-inline">
                    {% if (config_seo_url) %} 
                    <input type="radio" name="config_seo_url" value="1" checked="checked" />
                    {{ text_yes }} 
                    {% else %} 
                    <input type="radio" name="config_seo_url" value="1" />
                    {{ text_yes }} 
                    {% endif %} 
                  </label>
                  <label class="radio-inline">
                    {% if (not config_seo_url) %} 
                    <input type="radio" name="config_seo_url" value="0" checked="checked" />
                    {{ text_no }} 
                    {% else %} 
                    <input type="radio" name="config_seo_url" value="0" />
                    {{ text_no }} 
                    {% endif %} 
                  </label>
                  <div class="col-sm-12">
                  {% if not htaccess %}
                  <span style="color:red; display:none" id="config_seo_url">{{ help_seo_url }}</span>
                  {% endif %}
                  </div>
                </div>
              </div>
              <div id="config_seo_url">
                <div class="form-group">
                  <label class="col-sm-2 control-label" for="input-status">{{ entry_status }}</label>
                  <div class="col-sm-10">
                    <select name="sla_seo_pro_status" id="input-status" class="form-control">
                      {% if (sla_seo_pro_status) %} 
                      <option value="1" selected="selected">{{ text_enabled }}</option>
                      <option value="0">{{ text_disabled }}</option>
                      {% else %} 
                      <option value="1">{{ text_enabled }}</option>
                      <option value="0" selected="selected">{{ text_disabled }}</option>
                      {% endif %} 
                    </select>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-2 control-label"><span data-toggle="tooltip"   title="{{ entry_sla_seo_pro_include_path_help }}">{{ entry_sla_seo_pro_include_path }}</span></label>
                  <div class="col-sm-10">
                    {% if (sla_seo_pro_include_path) %} 
                    <label class="radio-inline">
                      <input type="radio" name="sla_seo_pro_include_path" value="1" checked="checked"/>
                      {{ text_yes }} 
                    </label>
                    <label class="radio-inline">
                      <input type="radio" name="sla_seo_pro_include_path" value="0"/>
                      {{ text_no }} 
                    </label>
                    {% else %} 
                    <label class="radio-inline">
                      <input type="radio" name="sla_seo_pro_include_path" value="1"/>
                      {{ text_yes }} 
                    </label>
                    <label class="radio-inline">
                      <input type="radio" name="sla_seo_pro_include_path" value="0" checked="checked"/>
                      {{ text_no }} 
                    </label>
                    {% endif %} 
                  </div>
                </div>
                <div class="form-group" id="type-path">
                  <label class="col-sm-2 control-label">{{ entry_sla_seo_pro_type_path }}</label>
                  <div class="col-sm-10">
                    <select name="sla_seo_pro_type_path" class="form-control">
                      {% for type_path, text in type_pathes %} 
                      {% set selected = (type_path==sla_seo_pro_type_path)? ' selected="selected"' : '' %}
                      <option value="{{ type_path }}" {{ selected }}>{{ text }}</option>
                      {% endfor %}
                    </select>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-2 control-label"><span data-toggle="tooltip"   title="{{ entry_sla_seo_pro_seo_page_help }}">{{ entry_sla_seo_pro_seo_page }}</span></label>
                  <div class="col-sm-10">
                    {% if (sla_seo_pro_seo_page) %} 
                    <label class="radio-inline">
                      <input type="radio" name="sla_seo_pro_seo_page" value="1" checked="checked"/>
                      {{ text_yes }} 
                    </label>
                    <label class="radio-inline">
                      <input type="radio" name="sla_seo_pro_seo_page" value="0"/>
                      {{ text_no }} 
                    </label>
                    {% else %} 
                    <label class="radio-inline">
                      <input type="radio" name="sla_seo_pro_seo_page" value="1"/>
                      {{ text_yes }} 
                    </label>
                    <label class="radio-inline">
                      <input type="radio" name="sla_seo_pro_seo_page" value="0" checked="checked"/>
                      {{ text_no }} 
                    </label>
                    {% endif %} 
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-2 control-label" for="sla_seo_pro_postfix"><span data-toggle="tooltip"
                    title="{{ entry_sla_seo_pro_postfix_help }}">{{ entry_sla_seo_pro_postfix }}</span></label>
                  <div class="col-sm-10">
                    <input type="text" name="sla_seo_pro_postfix" value="{{ sla_seo_pro_postfix }}" id="sla_seo_pro_postfix" class="form-control"/>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-2 control-label"><span data-toggle="tooltip"   title="{{ entry_sla_seo_pro_postfix_slash_help }}">{{ entry_sla_seo_pro_postfix_slash }}</span></label>
                  <div class="col-sm-10">
                    {% if (sla_seo_pro_postfix_slash) %} 
                    <label class="radio-inline">
                      <input type="radio" name="sla_seo_pro_postfix_slash" value="1" checked="checked"/>
                      {{ text_yes }} 
                    </label>
                    <label class="radio-inline">
                      <input type="radio" name="sla_seo_pro_postfix_slash" value="0"/>
                      {{ text_no }} 
                    </label>
                    {% else %} 
                    <label class="radio-inline">
                      <input type="radio" name="sla_seo_pro_postfix_slash" value="1"/>
                      {{ text_yes }} 
                    </label>
                    <label class="radio-inline">
                      <input type="radio" name="sla_seo_pro_postfix_slash" value="0" checked="checked"/>
                      {{ text_no }} 
                    </label>
                    {% endif %} 
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-2 control-label"><span data-toggle="tooltip"   title="{{ entry_sla_seo_pro_postfix_slash_product_help }}">{{ entry_sla_seo_pro_postfix_slash_product }}</span></label>
                  <div class="col-sm-10">
                  {% if (sla_seo_pro_postfix_slash_product) %} 
                  <label class="radio-inline">
                    <input type="radio" name="sla_seo_pro_postfix_slash_product" value="1" checked="checked"/>
                    {{ text_yes }} 
                  </label>
                  <label class="radio-inline">
                    <input type="radio" name="sla_seo_pro_postfix_slash_product" value="0"/>
                    {{ text_no }} 
                  </label>
                  {% else %} 
                  <label class="radio-inline">
                    <input type="radio" name="sla_seo_pro_postfix_slash_product" value="1"/>
                    {{ text_yes }} 
                  </label>
                  <label class="radio-inline">
                    <input type="radio" name="sla_seo_pro_postfix_slash_product" value="0" checked="checked"/>
                    {{ text_no }} 
                  </label>
                  {% endif %} 
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-2 control-label"><span data-toggle="tooltip"   title="{{ entry_sla_seo_pro_short_url_help }}">{{ entry_sla_seo_pro_short_url }}</span></label>
                  <div class="col-sm-10">
                  {% if (sla_seo_pro_short_url) %} 
                  <label class="radio-inline">
                    <input type="radio" name="sla_seo_pro_short_url" value="1" checked="checked"/>
                    {{ text_yes }} 
                  </label>
                  <label class="radio-inline">
                    <input type="radio" name="sla_seo_pro_short_url" value="0"/>
                    {{ text_no }} 
                  </label>
                  {% else %} 
                  <label class="radio-inline">
                    <input type="radio" name="sla_seo_pro_short_url" value="1"/>
                    {{ text_yes }} 
                  </label>
                  <label class="radio-inline">
                    <input type="radio" name="sla_seo_pro_short_url" value="0" checked="checked"/>
                    {{ text_no }} 
                  </label>
                  {% endif %} 
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-2 control-label" for="sla_seo_pro_prefix_product"><span data-toggle="tooltip"
                    title="{{ entry_sla_seo_pro_prefix_product_help }}">{{ entry_sla_seo_pro_prefix_product }}</span></label>
                  <div class="col-sm-10">
                  <input type="text" name="sla_seo_pro_prefix_product" value="{{ sla_seo_pro_prefix_product }}" id="sla_seo_pro_prefix_product" class="form-control"/>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-2 control-label" for="sla_seo_pro_prefix_category"><span data-toggle="tooltip"
                    title="{{ entry_sla_seo_pro_prefix_category_help }}">{{ entry_sla_seo_pro_prefix_category }}</span></label>
                  <div class="col-sm-10">
                  <input type="text" name="sla_seo_pro_prefix_category" value="{{ sla_seo_pro_prefix_category }}" id="sla_seo_pro_prefix_category" class="form-control"/>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-2 control-label">{{ entry_allow_utm }}</label>
                  <div class="col-sm-10">
                    <div class="checkbox">
                      {% if sla_seo_pro_allow_utm %}
                                <input type="checkbox" name="sla_seo_pro_allow_utm" value="1" checked="checked" class="form-control"/>
                      {% else %}
                                <input type="checkbox" name="sla_seo_pro_allow_utm" value="1" class="form-control" />
                      {% endif %}
                    </div>
                  </div>
                </div>
                <div class="form-group" id="allow_utm">
                  <label class="col-sm-2 control-label" for="input-utm"><span data-toggle="tooltip" title="{{ help_utm }}">{{ entry_utm }}</span></label>
                  <div class="col-sm-10">
                    <textarea name="sla_seo_pro_utm" rows="10" placeholder="{{ entry_utm }}" id="input-utm" class="form-control">{{ sla_seo_pro_utm }}</textarea>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-2 control-label">{{ entry_use_lang_prefix }}</label>
                  <div class="col-sm-10">
                    <div class="checkbox">
                      {% if sla_seo_pro_use_lang_prefix %}
                      <input type="checkbox" name="sla_seo_pro_use_lang_prefix" value="1" checked="checked" class="form-control"/>
                      {% else %}
                      <input type="checkbox" name="sla_seo_pro_use_lang_prefix" value="1" class="form-control" />
                      {% endif %}
                    </div>
                  </div>
                </div>
                <div id="use_lang_prefix">

                <div class="form-group">
                  <label class="col-sm-2 control-label"><span data-toggle="tooltip" title="{{ help_use_lang_prefix }}">{{ entry_lang_prefix }}</span></label>
                  <div class="col-sm-10">
				  {% for language in languages %}
                    <div class="input-group">
                      <span class="input-group-addon"><img src="language/{{ language.code }}/{{ language.code }}.png" alt="{{ language.name }}" /></span>
                      <input name="sla_seo_pro_lang_prefix[{{ language.language_id }}]" class="form-control" value="{{ sla_seo_pro_lang_prefix[language.language_id] is defined?sla_seo_pro_lang_prefix[language.language_id]:language.code }}" />
				    </div>
				  {% endfor %}
					<div>
                      <div class="input-group">
			            <div class="input-group-addon">Вид ЧПУ</div>
                          <select name="sla_seo_pro_use_lang_prefix_main" class="form-control">
                          {% for use_lang_prefix_main, text in use_lang_prefix_mains %} 
                            {% set selected = (use_lang_prefix_main==sla_seo_pro_use_lang_prefix_main)? ' selected="selected"' : '' %}
                            <option value="{{ use_lang_prefix_main }}" {{ selected }}>{{ text }}</option>
                          {% endfor %}
                           </select>
                      </div>					
					</div>
				  
                  </div>
                </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-2 control-label"><span data-toggle="tooltip" title="{{ help_use_hreflang }}">{{ entry_hreflang }}</span></label>
                  <div class="col-sm-10">
				  {% for language in languages %}
                    <div class="input-group">
                      <span class="input-group-addon"><img src="language/{{ language.code }}/{{ language.code }}.png" alt="{{ language.name }}" /></span>
                      <input name="sla_seo_pro_hreflang[{{ language.language_id }}]" class="form-control" value="{{ sla_seo_pro_hreflang[language.language_id] is defined?sla_seo_pro_hreflang[language.language_id]:language.code }}" />
				    </div>
				  {% endfor %}
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-pane" id="tab-help">
              <div>{{ text_with_problem }} <a href="{{ button_log }}" class="btn btn-default">{{ text_btn_log }}</a><br>
              {{ text_send_me }} 
              </div>
              <hr>
              <div>{{ text_recover_category }} <a id="recovery-category" href="{{ button_recovery_category }}" class="btn btn-default">{{ text_recover_category }}</a><br>
              </div>
              <hr>
              <div>{{ text_clear_cache }} <a id="clear-cache" href="{{ button_clear_cache }}" class="btn btn-default">{{ text_clear_cache }}</a><br>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
<script>

$('#recovery-category, #clear-cache').click(function(event){
  event.preventDefault();  
  var href = $(this).attr('href');
  $.ajax({
    url: href,
    dataType:'json',
    success: function(json) {
      var html = '<div class="alert alert-success alert-dismissible"><i class="fa fa-check-circle"></i> ' + json['success'];
      html  += '<button type="button" class="close" data-dismiss="alert">&times;</button></div>';
      $('#content').prepend(html);
    },
    error: function (jqXHR, exception) {
      var msg = '';
      if (jqXHR.status === 0) {
        msg = 'Not connect.\n Verify Network.';
      } else if (jqXHR.status == 404) {
        msg = 'Requested page not found. [404]';
      } else if (jqXHR.status == 500) {
        msg = 'Internal Server Error [500].';
      } else if (exception === 'parsererror') {
        msg = 'Requested JSON parse failed.';
      } else if (exception === 'timeout') {
        msg = 'Time out error.';
      } else if (exception === 'abort') {
        msg = 'Ajax request aborted.';
      } else {
        msg = 'Uncaught Error.\n' + jqXHR.responseText;
      }
      if ($msg) {
        var html = '<div class="alert alert-danger"><i class="fa fa-exclamation-circle"></i> ' + msg;
        html  += '<button type="button" class="close" data-dismiss="alert">&times;</button></div>';
        $('#content').prepend(html);
      }
    }
  });
  return false;
  }
);

$('input[name=config_seo_url]').change(function(){
  var val = $(this).val();
  if (parseInt(val)) { 
    $('#config_seo_url').show();
  } else {
    $('#config_seo_url').hide();
  }
});
if (parseInt($('input[name=config_seo_url]:checked').val())) {$('#config_seo_url').show();} else {$('#config_seo_url').hide();}
$('input[name=sla_seo_pro_allow_utm]').change(function(){
  if ($(this).is(':checked')) { 
    $('#allow_utm').show();
  } else {
    $('#allow_utm').hide();
  }
});
if ($('input[name=sla_seo_pro_allow_utm]').is(':checked')) {$('#allow_utm').show();} else {$('#allow_utm').hide();}

$('input[name=sla_seo_pro_use_lang_prefix]').change(function(){
  if ($(this).is(':checked')) { 
    $('#use_lang_prefix').show();
  } else {
    $('#use_lang_prefix').hide();
  }
});
if ($('input[name=sla_seo_pro_use_lang_prefix]').is(':checked')) {$('#use_lang_prefix').show();} else {$('#use_lang_prefix').hide();}

$('input[name=sla_seo_pro_include_path]').change(function(){
  if (parseInt($(this).val())) { 
    $('#type-path').show();
  } else {
    $('#type-path').hide();
  }
});
//$('input[name=sla_seo_pro_include_path]').trigger('change');


</script>
{{ footer }}